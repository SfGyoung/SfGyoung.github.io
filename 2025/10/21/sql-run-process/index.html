<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>一条sql语句运行的全过程 | YoungDev</title><meta name="author" content="Young"><meta name="copyright" content="Young"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="首先来看一下整个流程图，再来讲各个流程发生了什么。  总架构分为两层：  Server层负责 连接 分析和执行SQL 存储引擎层 负责数据存储与提取(实际存储的地方)  Server层连接器连接器负责建立SQL连接。 也就是我们输入用户名密码 建立连接的过程。 连接器的作用总结如下：  与客户端建立TCP三次握手连接 校验用户名和密码。 正确后，根据用户，判定权限。  缓存器缓存查询过的数据，但鸡">
<meta property="og:type" content="article">
<meta property="og:title" content="一条sql语句运行的全过程">
<meta property="og:url" content="https://sfgyoung.github.io/2025/10/21/sql-run-process/index.html">
<meta property="og:site_name" content="YoungDev">
<meta property="og:description" content="首先来看一下整个流程图，再来讲各个流程发生了什么。  总架构分为两层：  Server层负责 连接 分析和执行SQL 存储引擎层 负责数据存储与提取(实际存储的地方)  Server层连接器连接器负责建立SQL连接。 也就是我们输入用户名密码 建立连接的过程。 连接器的作用总结如下：  与客户端建立TCP三次握手连接 校验用户名和密码。 正确后，根据用户，判定权限。  缓存器缓存查询过的数据，但鸡">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sfgyoung.github.io/img/dog1.png">
<meta property="article:published_time" content="2025-10-21T08:23:11.117Z">
<meta property="article:modified_time" content="2025-10-22T05:40:35.291Z">
<meta property="article:author" content="Young">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sfgyoung.github.io/img/dog1.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "一条sql语句运行的全过程",
  "url": "https://sfgyoung.github.io/2025/10/21/sql-run-process/",
  "image": "https://sfgyoung.github.io/img/dog1.png",
  "datePublished": "2025-10-21T08:23:11.117Z",
  "dateModified": "2025-10-22T05:40:35.291Z",
  "author": [
    {
      "@type": "Person",
      "name": "Young",
      "url": "https://SfGyoung.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://sfgyoung.github.io/2025/10/21/sql-run-process/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '一条sql语句运行的全过程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.0.0"></head><body><div id="web_bg" style="background-image: url(/img/spider.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/dog1.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/spider.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">YoungDev</span></a><a class="nav-page-title" href="/"><span class="site-name">一条sql语句运行的全过程</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">一条sql语句运行的全过程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-10-21T08:23:11.117Z" title="Created 2025-10-21 16:23:11">2025-10-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T05:40:35.291Z" title="Updated 2025-10-22 13:40:35">2025-10-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>首先来看一下整个流程图，再来讲各个流程发生了什么。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/45443715/1726038959168-3b1d81e3-6926-4468-93c1-1b5a661aa347.png" alt="img"></p>
<p>总架构分为两层：</p>
<ul>
<li>Server层负责 连接 分析和执行SQL</li>
<li>存储引擎层 负责数据存储与提取(实际存储的地方)</li>
</ul>
<h1 id="Server层"><a href="#Server层" class="headerlink" title="Server层"></a>Server层</h1><h2 id="连接器"><a href="#连接器" class="headerlink" title="连接器"></a>连接器</h2><p>连接器负责建立SQL连接。</p>
<p>也就是我们输入用户名密码 建立连接的过程。</p>
<p>连接器的作用总结如下：</p>
<ul>
<li>与客户端建立TCP三次握手连接</li>
<li>校验用户名和密码。</li>
<li>正确后，根据用户，判定权限。</li>
</ul>
<h2 id="缓存器"><a href="#缓存器" class="headerlink" title="缓存器"></a>缓存器</h2><p>缓存查询过的数据，但鸡肋，因为只要表有一条数据只要有修改，整张表缓存信息作废。</p>
<p>MySQL8.0 废除</p>
<h2 id="解析器"><a href="#解析器" class="headerlink" title="解析器"></a>解析器</h2><p>词法分析（确认关键词）-&gt; 语法分析（构建语法树）</p>
<p>举个栗子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select user_inform from uesr_tab</span><br></pre></td></tr></table></figure>

<p>解析器会首先做<strong>词法分析</strong>，分析哪个词是关键词，哪个词不是。</p>
<p>如下：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/45443715/1726039879518-9336cf35-1f7a-4943-8431-536b09a0357d.png" alt="img"></p>
<p>紧接着做<strong>语法分析</strong>，分析语法是否有错误。</p>
<p>分析完成后，会构建出语法树。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/45443715/1726039941867-07eacf56-691b-4316-b17e-49ec676c336e.png" alt="img"></p>
<h2 id="执行SQL"><a href="#执行SQL" class="headerlink" title="执行SQL"></a>执行SQL</h2><p>执行SQL又分为三个阶段：</p>
<ul>
<li>预处理阶段</li>
<li>优化阶段</li>
<li>执行阶段</li>
</ul>
<h3 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h3><ul>
<li>检查SQL语句中的表或字段是否存在</li>
<li>将select * 中的 * 解析为所有列</li>
</ul>
<h3 id="优化阶段"><a href="#优化阶段" class="headerlink" title="优化阶段"></a>优化阶段</h3><p>负责确定SQL的执行方案，比如一个SQL语句有多个索引时，决定用哪个索引。</p>
<p>如：</p>
<p><code>explain select * from product where id = 1</code>（要想看到执行计划，在sql语句前加个 <strong>explain</strong>）</p>
<p>id是主键，使用主键索引。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/45443715/1726040482779-eb0fe780-8bad-469c-a1fe-a35144c2bd25.png" alt="img"></p>
<p>如果没有使用索引，则会进行全表扫描，效率很低</p>
<p>如</p>
<p>select * from user where uesrName &#x3D; “young”</p>
<p>这里没有使用到索引，因此会把整张表都扫描一遍。</p>
<p>现在为name是建立索引，查看其执行计划。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select id from user where id &gt; <span class="number">1</span> and name like <span class="string">&#x27;i%&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这里出现了覆盖索引，二级索引会返回其对应的一级索引信息（避免回表），所以采用普通索引效率更高。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/45443715/1726040794779-087fad5c-b078-444a-be93-aeb771e50e29.png" alt="img"></p>
<h3 id="执行器（重点）"><a href="#执行器（重点）" class="headerlink" title="执行器（重点）"></a>执行器（重点）</h3><p>确定好执行方案后，就开始用执行器执行了。根据执行计划执行 SQL 查询语句，从存储引擎读取记录，返回给客户端。</p>
<h4 id="主键索引查询"><a href="#主键索引查询" class="headerlink" title="主键索引查询"></a>主键索引查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where id = 1; </span><br></pre></td></tr></table></figure>

<p>因为主键索引唯一，把id值给存储引擎，存储引擎通过b+树定位到id&#x3D;1的记录返回给server层，server层做判断id是否等于1，如果是，则返回给客户端，如果不是，继续查找。</p>
<ul>
<li>执行器调用<code>read_first_record</code>函数，让引擎层找id &#x3D; 1的记录，由于是执行计划是主键查询，引擎利用索引找到第一个id &#x3D; 1记录。</li>
<li>引擎利用主键索引寻找id &#x3D; 1的记录，找到则返回给server，找不到则报错给server。</li>
<li>server在收到引擎返回的记录后，校验条件，通过则返回给client，不通过则跳过。</li>
<li><strong>server向引擎层查询的过程是一个死循环</strong>，继续调用函数，由于不是首次，调用的是<code>read_record</code>函数，继续向引擎查找记录。由于是主键索引的方式，访问类型为const，第二次调用直接返回-1，跳出死循环。结束查询。</li>
</ul>
<h4 id="全表查询"><a href="#全表查询" class="headerlink" title="全表查询"></a>全表查询</h4><p>执行计划all，</p>
<p>如<code>select * from user where uesrName = &#39;young&#39;</code>这里name没有建索引，会走全表扫描。</p>
<p>执行器会判断读到的记录是否 userName &#x3D; ‘young’, 如果是，则返回给客户端。</p>
<p>一直扫描，直到走完 全表。</p>
<h4 id="索引下探"><a href="#索引下探" class="headerlink" title="索引下探"></a>索引下探</h4><p>使用索引下探能直接在存储引擎层<strong>在回表前</strong>完成「判断」工作（sql里有判断语句），减少了多次回表操作。</p>
<p><em>也就是减少了 引擎层 与 server层的交互，直接在引擎层进行逻辑判断。</em></p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where age &gt; 20 and record = &#x27;20000&#x27;</span><br></pre></td></tr></table></figure>

<p>对 age，record 建立联合索引 (age, record)</p>
<p>这条sql语句下， 索引查到 age &gt; 20时， record是失效的。</p>
<p>索引对 同一 age 下 reord 有序，不同 age下 record 无序。 无法利用b+树索引</p>
<p><strong>没走索引下探的情况：</strong></p>
<ul>
<li>引擎层在利用b+树找到 age&gt;20的记录时，获取其<strong>对应主键值</strong>，进行回表操作，将完整记录返回给 Server。</li>
<li>server 判断当前记录的record是否等于’20000’ ，是则返回给客户端，不是则跳过该记录，继续寻找。</li>
<li>如此类推，直到把age&gt;20的所有记录扫描完毕。</li>
</ul>
<p><strong>走索引下探的情况：</strong></p>
<ul>
<li>引擎层在利用b+树找到 age&gt;20的记录时，<strong>先不进行回表操作，而是判断该条记录的record是否等于’20000’（有索引，能直接得到该数值）</strong>，是则进行回表并将返回该条记录给server层，不是则跳过该二级索引。</li>
<li>server层在判断该记录其他查询条件（本条中无其他记录）是否成立，是则返回给客户端。</li>
<li>如此类推。直到所有记录扫描完毕。</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>一条sql查询语句全过程：</p>
<ol>
<li><p>连接器建立连接</p>
</li>
<li><p>账户密码校验</p>
</li>
<li><p>校验通过建立TCP连接</p>
</li>
<li><p>用户权限校验</p>
</li>
<li><p>管理连接（长连接，短链接，过期连接清除）</p>
</li>
<li><p>查询sql对应缓存（新版已废弃）</p>
</li>
<li><p>解析器</p>
</li>
<li><p>词法分析（找出对应关键词 如 select ， from）</p>
</li>
<li><p>语法分析（分析sql语句语法），并建立语法树</p>
</li>
<li><p>执行器</p>
</li>
<li><p>预处理</p>
</li>
<li><p>* 变为 所有</p>
</li>
<li><p>检查表，字段是否存在</p>
</li>
<li><p>优化阶段</p>
</li>
<li><p>执行计划优化，判断如何走索引</p>
</li>
<li><p>执行器：调用存储引擎真正开始查询，引擎在找到记录后会返回给server层做判断</p>
</li>
<li><p>若符合条件，则返回给客户端</p>
</li>
<li><p>不符合，则继续向引擎层查找。</p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://SfGyoung.github.io">Young</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://sfgyoung.github.io/2025/10/21/sql-run-process/">https://sfgyoung.github.io/2025/10/21/sql-run-process/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/dog1.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/21/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E6%A1%88/" title="MySql与Redis双写一致性方案"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">MySql与Redis双写一致性方案</div></div><div class="info-2"><div class="info-item-1">背景在实际开发中，经常需要使用redis做cache，提高读性能。而引入缓存后，需要注意缓存与数据库一致性的问题。   CacheAside 旁路缓存  Redis 和 Mysql 数据发生不一致的本质： 更新数据，设计到两个代码操作：  更新数据库 更新Redis  发生不一致的本质：这两个操作不是原子性的，因此在并发下，多线程的执行顺序导致数据库不一致。 如： 为什么要先更新数据库，在更新缓存 先更新缓存，在更新数据库的情况： 线程A, 线程B都执行写操作。 可能的执行顺序：  线程A更新缓存值为A 线程B更新缓存值为B 线程B更新数据库B 线程A更新数据库A  此时，缓存值为B 数据库值为A 不一致。 为什么是删除缓存，而不是更新缓存为新值 线程A, 线程B都执行写操作。  线程A更新数据库A 线程B更新数据库B 线程B更新缓存B 线程A更新缓存A  此时，数据库B，缓存A 不一致 因此本质就是更新数据库，更新缓存这两个操作不是原子的，因此在此之间能发生线程安全问题。 那先更新数据库，在删除缓存，就能保证数据库一致了吗？ 不不不，还有一种情况，那就是更新数据库后，还没删除缓...</div></div></div></a><a class="pagination-related" href="/2025/10/21/hello-world/" title="MySql，Redis，RocketMQ 持久化的本质及蕴含的思想"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">MySql，Redis，RocketMQ 持久化的本质及蕴含的思想</div></div><div class="info-2"><div class="info-item-1">背景最近复习秋招，在学习，总结各个中间件的过程中，发现其持久化机制存在一些共性的思想，可以复用到日后的一些开发设计当中。 为什么需要持久化为了提升性能，中间件一般是由内存储存数据，而内存会有数据丢失的风险，因此需要一套持久化机制来进行兜底，避免宕机，断电发生的数据丢失，是一种兜底手段。 Mysql是如何持久化的反直觉的是我们都知道Mysql的存储介质是磁盘，这里为什么还会说基于缓存呢？ 因为为了提升查询性能，mysql会设置一个基于内存的buffer pool，如mysql查询数据时，会首先在server端将请求打到引擎层，引擎层在buffer pool中查找是否存在该记录，是则直接返回。（整个过程，是没有与磁盘参与的，减少了大量I&#x2F;O操作，提升性能），这种Cache的思想在我们开发过程中也很常见。这里buffer pool具体的原理就不说了。 持久化的发生时机当mysql进行更新操作时，并不会直接访问磁盘修改对应的数据，而是将buffer pool中的数据标记为**「脏页」**，再（定时的将数据写回磁盘）。 因此，这里存在一个时隙，如果没有及时更新回磁盘，又断电了，更...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/dog1.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Young</div><div class="author-info-description">个人学习记录/技术思考/总结。</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/SfGyoung"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/SfGyoung" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1487208459@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">个人学习记录/思考/技术分享</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Server%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">Server层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">连接器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">缓存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">解析器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8CSQL"><span class="toc-number">1.4.</span> <span class="toc-text">执行SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">1.4.1.</span> <span class="toc-text">预处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E9%98%B6%E6%AE%B5"><span class="toc-number">1.4.2.</span> <span class="toc-text">优化阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%99%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">1.4.3.</span> <span class="toc-text">执行器（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">主键索引查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">全表查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%B8%8B%E6%8E%A2"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">索引下探</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/22/Android%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E2%80%94%E2%80%94-Mini-Insta360%E5%88%B6%E4%BD%9C/" title="Android学习记录 —— Mini Insta360制作">Android学习记录 —— Mini Insta360制作</a><time datetime="2025-11-22T08:50:07.000Z" title="Created 2025-11-22 16:50:07">2025-11-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/22/Android%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E2%80%94%E2%80%94-ContentProvider/" title="Android学习记录 —— ContentProvider">Android学习记录 —— ContentProvider</a><time datetime="2025-11-22T08:44:35.000Z" title="Created 2025-11-22 16:44:35">2025-11-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/22/Android%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E2%80%94%E2%80%94-Broadcast/" title="Android学习记录 —— Broadcast">Android学习记录 —— Broadcast</a><time datetime="2025-11-22T08:43:27.000Z" title="Created 2025-11-22 16:43:27">2025-11-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/22/Android%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E2%80%94%E2%80%94-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8EService/" title="Android学习记录 —— 多线程与Service">Android学习记录 —— 多线程与Service</a><time datetime="2025-11-22T08:34:51.000Z" title="Created 2025-11-22 16:34:51">2025-11-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/22/Android%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E2%80%94%E2%80%94-Activity-View-Fragment/" title="Android学习记录 —— Activity, View, Fragment">Android学习记录 —— Activity, View, Fragment</a><time datetime="2025-11-22T08:25:39.000Z" title="Created 2025-11-22 16:25:39">2025-11-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/spider.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Young</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>